[{
  "history_id" : "g92kyr84k1t",
  "history_input" : "# Data Preparation for Sentinel 2\n\nprint(\"Not ready yet..Prepare sentinel 2 into .csv\")\n\n",
  "history_output" : "Not ready yet..Prepare sentinel 2 into .csv\n",
  "history_begin_time" : 1677792187588,
  "history_end_time" : 1677792190728,
  "history_notes" : null,
  "history_process" : "78vedq",
  "host_id" : "45wlwr",
  "indicator" : "Done"
},{
  "history_id" : "seezlr3ni1t",
  "history_input" : "\n\n# reminder that if you are installing libraries in a Google Colab instance you will be prompted to restart your kernal\n\nimport json\nimport pandas as pd\nimport ee\nimport seaborn as sns\nimport matplotlib.pyplot as plt\nimport os\nimport geopandas as gpd\nimport geojson\nimport numpy as np\nimport os.path\nimport eeauth as e\n\n#exit() # done, uncomment if you want to download new files.\n\ntry:\n    ee.Initialize(e.creds())\nexcept Exception as e:\n    ee.Authenticate() # this must be run in terminal instead of Geoweaver. Geoweaver doesn't support prompt.\n    ee.Initialize()\n\n# read the grid geometry file\nhomedir = os.path.expanduser('~')\nprint(homedir)\ngithub_dir = f\"{homedir}/Documents/GitHub/SnowCast\"\n# read grid cell\nstation_cell_mapper_file = f\"{github_dir}/data/ready_for_training/station_cell_mapping.csv\"\n\norg_name = 'modis'\nproduct_name = f'MODIS/006/MOD10A1'\nvar_name = 'NDSI'\ncolumn_name = 'mod10a1_ndsi'\n\n#org_name = 'sentinel1'\n#product_name = 'COPERNICUS/S1_GRD'\n#var_name = 'VV'\n#column_name = 's1_grd_vv'\n\nstation_cell_mapper_df = pd.read_csv(station_cell_mapper_file)\n\nall_cell_df = pd.DataFrame(columns = ['date', column_name, 'cell_id', 'latitude', 'longitude'])\n\nfor ind in station_cell_mapper_df.index:\n    \n    try:\n      \n  \t  print(station_cell_mapper_df['station_id'][ind], station_cell_mapper_df['cell_id'][ind])\n  \t  current_cell_id = station_cell_mapper_df['cell_id'][ind]\n  \t  print(\"collecting \", current_cell_id)\n  \t  single_csv_file = f\"{homedir}/Documents/GitHub/SnowCast/data/modis/{column_name}_{current_cell_id}.csv\"\n\n  \t  if os.path.exists(single_csv_file):\n  \t    print(\"exists skipping..\")\n  \t    continue\n\n  \t  longitude = station_cell_mapper_df['lon'][ind]\n  \t  latitude = station_cell_mapper_df['lat'][ind]\n\n  \t  # identify a 500 meter buffer around our Point Of Interest (POI)\n  \t  poi = ee.Geometry.Point(longitude, latitude).buffer(30)\n\n  \t  def poi_mean(img):\n  \t      reducer = img.reduceRegion(reducer=ee.Reducer.mean(), geometry=poi, scale=30)\n  \t      mean = reducer.get(var_name)\n  \t      return img.set('date', img.date().format()).set(column_name,mean)\n        \n  \t  viirs1 = ee.ImageCollection(product_name).filterDate('2013-01-01','2017-12-31')\n  \t  poi_reduced_imgs1 = viirs1.map(poi_mean)\n  \t  nested_list1 = poi_reduced_imgs1.reduceColumns(ee.Reducer.toList(2), ['date',column_name]).values().get(0)\n  \t  # dont forget we need to call the callback method \"getInfo\" to retrieve the data\n  \t  df1 = pd.DataFrame(nested_list1.getInfo(), columns=['date',column_name])\n      \n  \t  viirs2 = ee.ImageCollection(product_name).filterDate('2018-01-01','2021-12-31')\n  \t  poi_reduced_imgs2 = viirs2.map(poi_mean)\n  \t  nested_list2 = poi_reduced_imgs2.reduceColumns(ee.Reducer.toList(2), ['date',column_name]).values().get(0)\n  \t  # dont forget we need to call the callback method \"getInfo\" to retrieve the data\n  \t  df2 = pd.DataFrame(nested_list2.getInfo(), columns=['date',column_name])\n      \n\n  \t  df = pd.concat([df1, df2])\n  \t  df['date'] = pd.to_datetime(df['date'])\n  \t  df = df.set_index('date')\n  \t  df['cell_id'] = current_cell_id\n  \t  df['latitude'] = latitude\n  \t  df['longitude'] = longitude\n  \t  df.to_csv(single_csv_file)\n\n  \t  df_list = [all_cell_df, df]\n  \t  all_cell_df = pd.concat(df_list) # merge into big dataframe\n      \n    except Exception as e:\n      \n  \t  print(e)\n  \t  pass\n    \n    \nall_cell_df.to_csv(f\"{homedir}/Documents/GitHub/SnowCast/data/{org_name}/{column_name}.csv\")  \n\n\n",
  "history_output" : "/home/chetana\nCDEC:ADM 76b55900-eb3d-4d25-a538-f74302ffe72d\ncollecting  76b55900-eb3d-4d25-a538-f74302ffe72d\nCannot save file into a non-existent directory: '/home/chetana/Documents/GitHub/SnowCast/data/modis'\nCDEC:AGP f191fe19-0e81-4bc9-9980-29738a05a49b\ncollecting  f191fe19-0e81-4bc9-9980-29738a05a49b\nCannot save file into a non-existent directory: '/home/chetana/Documents/GitHub/SnowCast/data/modis'\nCDEC:ALP f6106ef5-e6fd-423b-9034-59bce18319da\ncollecting  f6106ef5-e6fd-423b-9034-59bce18319da\nCannot save file into a non-existent directory: '/home/chetana/Documents/GitHub/SnowCast/data/modis'\nCDEC:BCB 0a54de9c-d804-4681-9f7f-9f770a0f6d2e\ncollecting  0a54de9c-d804-4681-9f7f-9f770a0f6d2e\nCannot save file into a non-existent directory: '/home/chetana/Documents/GitHub/SnowCast/data/modis'\nCDEC:BCH 4f383fb2-6cc7-48a8-9bdb-9c5d150e6eae\ncollecting  4f383fb2-6cc7-48a8-9bdb-9c5d150e6eae\nCannot save file into a non-existent directory: '/home/chetana/Documents/GitHub/SnowCast/data/modis'\nCDEC:BFL 7cf8af73-1abf-40ad-9788-0d757201eeb0\ncollecting  7cf8af73-1abf-40ad-9788-0d757201eeb0\nCannot save file into a non-existent directory: '/home/chetana/Documents/GitHub/SnowCast/data/modis'\nCDEC:BGP 30641173-db10-4320-ab1e-c46e765a9011\ncollecting  30641173-db10-4320-ab1e-c46e765a9011\nCannot save file into a non-existent directory: '/home/chetana/Documents/GitHub/SnowCast/data/modis'\nCDEC:BIM 30ab5128-9a8f-4446-b781-faf8bafb677f\ncollecting  30ab5128-9a8f-4446-b781-faf8bafb677f\nCannot save file into a non-existent directory: '/home/chetana/Documents/GitHub/SnowCast/data/modis'\nCDEC:BKL df01bf44-46b8-4541-b0a4-ed1fae16ac38\ncollecting  df01bf44-46b8-4541-b0a4-ed1fae16ac38\nCannot save file into a non-existent directory: '/home/chetana/Documents/GitHub/SnowCast/data/modis'\nCDEC:BLA 6dd37e24-0a9c-4749-8ab6-7e26d42925d6\ncollecting  6dd37e24-0a9c-4749-8ab6-7e26d42925d6\nCannot save file into a non-existent directory: '/home/chetana/Documents/GitHub/SnowCast/data/modis'\nCDEC:BLC 018cf1a1-f945-4097-9c47-0c4690538bb5\ncollecting  018cf1a1-f945-4097-9c47-0c4690538bb5\nCannot save file into a non-existent directory: '/home/chetana/Documents/GitHub/SnowCast/data/modis'\nCDEC:BLD 962f6718-ce02-4d13-b28c-e159d1adc2d4\ncollecting  962f6718-ce02-4d13-b28c-e159d1adc2d4\nCannot save file into a non-existent directory: '/home/chetana/Documents/GitHub/SnowCast/data/modis'\nCDEC:BLK c89dc6ca-6d69-41ce-954d-b51f64aaacb1\ncollecting  c89dc6ca-6d69-41ce-954d-b51f64aaacb1\nCannot save file into a non-existent directory: '/home/chetana/Documents/GitHub/SnowCast/data/modis'\nCDEC:BLS 4bb8fe22-653c-4611-a3d8-de5b2c62d13d\ncollecting  4bb8fe22-653c-4611-a3d8-de5b2c62d13d\nCannot save file into a non-existent directory: '/home/chetana/Documents/GitHub/SnowCast/data/modis'\nCDEC:BMW d674ee8e-49f1-44c9-890d-4e04997522a1\ncollecting  d674ee8e-49f1-44c9-890d-4e04997522a1\nCannot save file into a non-existent directory: '/home/chetana/Documents/GitHub/SnowCast/data/modis'\nCDEC:BNK 65565709-caca-4ed5-a8b6-2794da371708\ncollecting  65565709-caca-4ed5-a8b6-2794da371708\nCannot save file into a non-existent directory: '/home/chetana/Documents/GitHub/SnowCast/data/modis'\nCDEC:BSK c89dc6ca-6d69-41ce-954d-b51f64aaacb1\ncollecting  c89dc6ca-6d69-41ce-954d-b51f64aaacb1\nCannot save file into a non-existent directory: '/home/chetana/Documents/GitHub/SnowCast/data/modis'\nCDEC:CDP 76b55900-eb3d-4d25-a538-f74302ffe72d\ncollecting  76b55900-eb3d-4d25-a538-f74302ffe72d\nCannot save file into a non-existent directory: '/home/chetana/Documents/GitHub/SnowCast/data/modis'\nCDEC:CHM f11515e9-f2a0-4f8c-9f2d-12b9e2dc8569\ncollecting  f11515e9-f2a0-4f8c-9f2d-12b9e2dc8569\nCannot save file into a non-existent directory: '/home/chetana/Documents/GitHub/SnowCast/data/modis'\nCDEC:CHP cc66f524-dd2b-4d3f-bf96-4941edca2879\ncollecting  cc66f524-dd2b-4d3f-bf96-4941edca2879\nCannot save file into a non-existent directory: '/home/chetana/Documents/GitHub/SnowCast/data/modis'\nCDEC:CRL 09288a61-d120-4cee-ac46-5a275a8f005c\ncollecting  09288a61-d120-4cee-ac46-5a275a8f005c\nCannot save file into a non-existent directory: '/home/chetana/Documents/GitHub/SnowCast/data/modis'\nCDEC:CSL 51ebe834-adf4-474e-871e-28ebca2bd0cc\ncollecting  51ebe834-adf4-474e-871e-28ebca2bd0cc\nCannot save file into a non-existent directory: '/home/chetana/Documents/GitHub/SnowCast/data/modis'\nCDEC:CSV 4f383fb2-6cc7-48a8-9bdb-9c5d150e6eae\ncollecting  4f383fb2-6cc7-48a8-9bdb-9c5d150e6eae\nCannot save file into a non-existent directory: '/home/chetana/Documents/GitHub/SnowCast/data/modis'\nCDEC:CWD 4f383fb2-6cc7-48a8-9bdb-9c5d150e6eae\ncollecting  4f383fb2-6cc7-48a8-9bdb-9c5d150e6eae\nCannot save file into a non-existent directory: '/home/chetana/Documents/GitHub/SnowCast/data/modis'\nCDEC:CWF 76b55900-eb3d-4d25-a538-f74302ffe72d\ncollecting  76b55900-eb3d-4d25-a538-f74302ffe72d\nCannot save file into a non-existent directory: '/home/chetana/Documents/GitHub/SnowCast/data/modis'\nCDEC:CXS c89dc6ca-6d69-41ce-954d-b51f64aaacb1\ncollecting  c89dc6ca-6d69-41ce-954d-b51f64aaacb1\nCannot save file into a non-existent directory: '/home/chetana/Documents/GitHub/SnowCast/data/modis'\nCDEC:DAN 70bfdc00-dbd2-4c44-8039-04a547f91f76\ncollecting  70bfdc00-dbd2-4c44-8039-04a547f91f76\nCannot save file into a non-existent directory: '/home/chetana/Documents/GitHub/SnowCast/data/modis'\nCDEC:DDM 01be2cc7-ef77-4e4d-80ed-c4f8139162c3\ncollecting  01be2cc7-ef77-4e4d-80ed-c4f8139162c3\nCannot save file into a non-existent directory: '/home/chetana/Documents/GitHub/SnowCast/data/modis'\nCDEC:DPO 9023330c-2766-4585-b6fe-63593c519e03\ncollecting  9023330c-2766-4585-b6fe-63593c519e03\nCannot save file into a non-existent directory: '/home/chetana/Documents/GitHub/SnowCast/data/modis'\nCDEC:DSS 76b55900-eb3d-4d25-a538-f74302ffe72d\ncollecting  76b55900-eb3d-4d25-a538-f74302ffe72d\nCannot save file into a non-existent directory: '/home/chetana/Documents/GitHub/SnowCast/data/modis'\nCDEC:EBB 962f6718-ce02-4d13-b28c-e159d1adc2d4\ncollecting  962f6718-ce02-4d13-b28c-e159d1adc2d4\nCannot save file into a non-existent directory: '/home/chetana/Documents/GitHub/SnowCast/data/modis'\nCDEC:EP5 f6106ef5-e6fd-423b-9034-59bce18319da\ncollecting  f6106ef5-e6fd-423b-9034-59bce18319da\nCannot save file into a non-existent directory: '/home/chetana/Documents/GitHub/SnowCast/data/modis'\nCDEC:FDC c89dc6ca-6d69-41ce-954d-b51f64aaacb1\ncollecting  c89dc6ca-6d69-41ce-954d-b51f64aaacb1\nCannot save file into a non-existent directory: '/home/chetana/Documents/GitHub/SnowCast/data/modis'\nCDEC:FLL d674ee8e-49f1-44c9-890d-4e04997522a1\ncollecting  d674ee8e-49f1-44c9-890d-4e04997522a1\nCannot save file into a non-existent directory: '/home/chetana/Documents/GitHub/SnowCast/data/modis'\nCDEC:FRN f6106ef5-e6fd-423b-9034-59bce18319da\ncollecting  f6106ef5-e6fd-423b-9034-59bce18319da\nCannot save file into a non-existent directory: '/home/chetana/Documents/GitHub/SnowCast/data/modis'\nCDEC:FRW ddc760c7-dc6e-4fd4-ac1a-987ba3f79748\ncollecting  ddc760c7-dc6e-4fd4-ac1a-987ba3f79748\nCannot save file into a non-existent directory: '/home/chetana/Documents/GitHub/SnowCast/data/modis'\nCDEC:GEM 690ae8d4-c0d0-4dad-a7c4-67f3df07cc78\ncollecting  690ae8d4-c0d0-4dad-a7c4-67f3df07cc78\nCannot save file into a non-existent directory: '/home/chetana/Documents/GitHub/SnowCast/data/modis'\nCDEC:GIN dbf421d4-0295-4a9f-9e20-88ac299360b1\ncollecting  dbf421d4-0295-4a9f-9e20-88ac299360b1\nCannot save file into a non-existent directory: '/home/chetana/Documents/GitHub/SnowCast/data/modis'\nCDEC:GKS 51ebe834-adf4-474e-871e-28ebca2bd0cc\ncollecting  51ebe834-adf4-474e-871e-28ebca2bd0cc\nCannot save file into a non-existent directory: '/home/chetana/Documents/GitHub/SnowCast/data/modis'\nCDEC:GNF 5ec8a57d-8d5f-4331-b1fb-9d766f42991a\ncollecting  5ec8a57d-8d5f-4331-b1fb-9d766f42991a\nCannot save file into a non-existent directory: '/home/chetana/Documents/GitHub/SnowCast/data/modis'\nCDEC:GNL 403090bc-fc9e-44fb-921b-f7eea63e9740\ncollecting  403090bc-fc9e-44fb-921b-f7eea63e9740\nCannot save file into a non-existent directory: '/home/chetana/Documents/GitHub/SnowCast/data/modis'\nCDEC:GRM 232ef8b4-938f-42d7-a6e4-647d5280edd2\ncollecting  232ef8b4-938f-42d7-a6e4-647d5280edd2\nCannot save file into a non-existent directory: '/home/chetana/Documents/GitHub/SnowCast/data/modis'\nCDEC:GRV cc8b7ef5-1c86-4bd2-8cb9-969c7df1884e\ncollecting  cc8b7ef5-1c86-4bd2-8cb9-969c7df1884e\nCannot save file into a non-existent directory: '/home/chetana/Documents/GitHub/SnowCast/data/modis'\nCDEC:GRZ 018cf1a1-f945-4097-9c47-0c4690538bb5\ncollecting  018cf1a1-f945-4097-9c47-0c4690538bb5\nCannot save file into a non-existent directory: '/home/chetana/Documents/GitHub/SnowCast/data/modis'\nCDEC:HGM d674ee8e-49f1-44c9-890d-4e04997522a1\ncollecting  d674ee8e-49f1-44c9-890d-4e04997522a1\nCannot save file into a non-existent directory: '/home/chetana/Documents/GitHub/SnowCast/data/modis'\nCDEC:HIG 65565709-caca-4ed5-a8b6-2794da371708\ncollecting  65565709-caca-4ed5-a8b6-2794da371708\nCannot save file into a non-existent directory: '/home/chetana/Documents/GitHub/SnowCast/data/modis'\nCDEC:HMB df01bf44-46b8-4541-b0a4-ed1fae16ac38\ncollecting  df01bf44-46b8-4541-b0a4-ed1fae16ac38\nCannot save file into a non-existent directory: '/home/chetana/Documents/GitHub/SnowCast/data/modis'\nCDEC:HNT 39dd8dce-b4a1-4db5-bc31-fba72181cf5e\ncollecting  39dd8dce-b4a1-4db5-bc31-fba72181cf5e\nCannot save file into a non-existent directory: '/home/chetana/Documents/GitHub/SnowCast/data/modis'\nCDEC:HOR d674ee8e-49f1-44c9-890d-4e04997522a1\ncollecting  d674ee8e-49f1-44c9-890d-4e04997522a1\nCannot save file into a non-existent directory: '/home/chetana/Documents/GitHub/SnowCast/data/modis'\nCDEC:HRK df01bf44-46b8-4541-b0a4-ed1fae16ac38\ncollecting  df01bf44-46b8-4541-b0a4-ed1fae16ac38\nCannot save file into a non-existent directory: '/home/chetana/Documents/GitHub/SnowCast/data/modis'\nCDEC:HRS 49b01e43-f719-450f-b7c6-556b08e9ef4d\ncollecting  49b01e43-f719-450f-b7c6-556b08e9ef4d\nCannot save file into a non-existent directory: '/home/chetana/Documents/GitHub/SnowCast/data/modis'\nCDEC:HVN d674ee8e-49f1-44c9-890d-4e04997522a1\ncollecting  d674ee8e-49f1-44c9-890d-4e04997522a1\nCannot save file into a non-existent directory: '/home/chetana/Documents/GitHub/SnowCast/data/modis'\nCDEC:HYS 51ebe834-adf4-474e-871e-28ebca2bd0cc\ncollecting  51ebe834-adf4-474e-871e-28ebca2bd0cc\nCannot save file into a non-existent directory: '/home/chetana/Documents/GitHub/SnowCast/data/modis'\nCDEC:IDC 018cf1a1-f945-4097-9c47-0c4690538bb5\ncollecting  018cf1a1-f945-4097-9c47-0c4690538bb5\nCannot save file into a non-existent directory: '/home/chetana/Documents/GitHub/SnowCast/data/modis'\nCDEC:IDP 018cf1a1-f945-4097-9c47-0c4690538bb5\ncollecting  018cf1a1-f945-4097-9c47-0c4690538bb5\nCannot save file into a non-existent directory: '/home/chetana/Documents/GitHub/SnowCast/data/modis'\nCDEC:INN 018cf1a1-f945-4097-9c47-0c4690538bb5\ncollecting  018cf1a1-f945-4097-9c47-0c4690538bb5\nCannot save file into a non-existent directory: '/home/chetana/Documents/GitHub/SnowCast/data/modis'\nCDEC:KTL 147d5eb4-e574-47e4-994a-8a2908c06050\ncollecting  147d5eb4-e574-47e4-994a-8a2908c06050\nCannot save file into a non-existent directory: '/home/chetana/Documents/GitHub/SnowCast/data/modis'\nCDEC:LBD 74f8c8bc-2f60-4232-b447-43459d5d22f0\ncollecting  74f8c8bc-2f60-4232-b447-43459d5d22f0\nCannot save file into a non-existent directory: '/home/chetana/Documents/GitHub/SnowCast/data/modis'\nCDEC:LLP 6dd37e24-0a9c-4749-8ab6-7e26d42925d6\ncollecting  6dd37e24-0a9c-4749-8ab6-7e26d42925d6\nCannot save file into a non-existent directory: '/home/chetana/Documents/GitHub/SnowCast/data/modis'\nCDEC:LVM 01be2cc7-ef77-4e4d-80ed-c4f8139162c3\ncollecting  01be2cc7-ef77-4e4d-80ed-c4f8139162c3\nCannot save file into a non-existent directory: '/home/chetana/Documents/GitHub/SnowCast/data/modis'\nCDEC:LVT 01be2cc7-ef77-4e4d-80ed-c4f8139162c3\ncollecting  01be2cc7-ef77-4e4d-80ed-c4f8139162c3\nCannot save file into a non-existent directory: '/home/chetana/Documents/GitHub/SnowCast/data/modis'\nCDEC:MDW 018cf1a1-f945-4097-9c47-0c4690538bb5\ncollecting  018cf1a1-f945-4097-9c47-0c4690538bb5\nCannot save file into a non-existent directory: '/home/chetana/Documents/GitHub/SnowCast/data/modis'\nCDEC:MED 00c4db22-a423-41a4-ada6-a8b1b04153a4\ncollecting  00c4db22-a423-41a4-ada6-a8b1b04153a4\nCannot save file into a non-existent directory: '/home/chetana/Documents/GitHub/SnowCast/data/modis'\nCDEC:MHP ec0952b6-f119-4f40-bf47-343d71245ddc\ncollecting  ec0952b6-f119-4f40-bf47-343d71245ddc\nCannot save file into a non-existent directory: '/home/chetana/Documents/GitHub/SnowCast/data/modis'\nCDEC:MNT 74f8c8bc-2f60-4232-b447-43459d5d22f0\ncollecting  74f8c8bc-2f60-4232-b447-43459d5d22f0\nCannot save file into a non-existent directory: '/home/chetana/Documents/GitHub/SnowCast/data/modis'\nCDEC:MRL d674ee8e-49f1-44c9-890d-4e04997522a1\ncollecting  d674ee8e-49f1-44c9-890d-4e04997522a1\nCannot save file into a non-existent directory: '/home/chetana/Documents/GitHub/SnowCast/data/modis'\nCDEC:MSK d674ee8e-49f1-44c9-890d-4e04997522a1\ncollecting  d674ee8e-49f1-44c9-890d-4e04997522a1\nCannot save file into a non-existent directory: '/home/chetana/Documents/GitHub/SnowCast/data/modis'\nCDEC:MTM b5c7343d-a4a9-4da9-aee3-36539a545af6\ncollecting  b5c7343d-a4a9-4da9-aee3-36539a545af6\nCannot save file into a non-existent directory: '/home/chetana/Documents/GitHub/SnowCast/data/modis'\nCDEC:PDS 17da8ab4-6dd8-481e-a025-7574765ef9b1\ncollecting  17da8ab4-6dd8-481e-a025-7574765ef9b1\nCannot save file into a non-existent directory: '/home/chetana/Documents/GitHub/SnowCast/data/modis'\nCDEC:PET 65565709-caca-4ed5-a8b6-2794da371708\ncollecting  65565709-caca-4ed5-a8b6-2794da371708\nCannot save file into a non-existent directory: '/home/chetana/Documents/GitHub/SnowCast/data/modis'\nCDEC:PSC 4f383fb2-6cc7-48a8-9bdb-9c5d150e6eae\ncollecting  4f383fb2-6cc7-48a8-9bdb-9c5d150e6eae\nCannot save file into a non-existent directory: '/home/chetana/Documents/GitHub/SnowCast/data/modis'\nCDEC:PSN 74f8c8bc-2f60-4232-b447-43459d5d22f0\ncollecting  74f8c8bc-2f60-4232-b447-43459d5d22f0\nCannot save file into a non-existent directory: '/home/chetana/Documents/GitHub/SnowCast/data/modis'\nCDEC:QUA d563ff8c-31c3-44a9-8fd3-2f8bc68b21b4\ncollecting  d563ff8c-31c3-44a9-8fd3-2f8bc68b21b4\nCannot save file into a non-existent directory: '/home/chetana/Documents/GitHub/SnowCast/data/modis'\nCDEC:RBP 51ebe834-adf4-474e-871e-28ebca2bd0cc\ncollecting  51ebe834-adf4-474e-871e-28ebca2bd0cc\nCannot save file into a non-existent directory: '/home/chetana/Documents/GitHub/SnowCast/data/modis'\nCDEC:RCC 018cf1a1-f945-4097-9c47-0c4690538bb5\ncollecting  018cf1a1-f945-4097-9c47-0c4690538bb5\nCannot save file into a non-existent directory: '/home/chetana/Documents/GitHub/SnowCast/data/modis'\nCDEC:RCK cbe04952-a2ae-4525-98c5-a644c9a5ddc5\ncollecting  cbe04952-a2ae-4525-98c5-a644c9a5ddc5\nCannot save file into a non-existent directory: '/home/chetana/Documents/GitHub/SnowCast/data/modis'\nCDEC:RP2 f6106ef5-e6fd-423b-9034-59bce18319da\ncollecting  f6106ef5-e6fd-423b-9034-59bce18319da\nCannot save file into a non-existent directory: '/home/chetana/Documents/GitHub/SnowCast/data/modis'\nCDEC:RRM 7cf8af73-1abf-40ad-9788-0d757201eeb0\ncollecting  7cf8af73-1abf-40ad-9788-0d757201eeb0\nCannot save file into a non-existent directory: '/home/chetana/Documents/GitHub/SnowCast/data/modis'\nCDEC:RTL 147d5eb4-e574-47e4-994a-8a2908c06050\ncollecting  147d5eb4-e574-47e4-994a-8a2908c06050\n",
  "history_begin_time" : 1677792193096,
  "history_end_time" : 1677792191330,
  "history_notes" : null,
  "history_process" : "525l8q",
  "host_id" : "45wlwr",
  "indicator" : "Running"
},{
  "history_id" : "pzijvevkrkt",
  "history_input" : "import json\nimport pandas as pd\nimport ee\nimport seaborn as sns\nimport matplotlib.pyplot as plt\nimport os\nimport geopandas as gpd\nimport geojson\nimport numpy as np\nimport os.path\nimport math\n\n#pd.set_option('display.max_columns', None)\n\n# read the grid geometry file\nhomedir = os.path.expanduser('~')\nprint(homedir)\ngithub_dir = f\"{homedir}/Documents/GitHub/SnowCast\"\n# read grid cell\ngridcells_file = f\"{github_dir}/data/snowcast_provided/grid_cells.geojson\"\nmodel_dir = f\"{github_dir}/model/\"\ntraining_feature_file = f\"{github_dir}/data/snowcast_provided/ground_measures_train_features.csv\"\ntesting_feature_file = f\"{github_dir}/data/snowcast_provided/ground_measures_test_features.csv\"\ntrain_labels_file = f\"{github_dir}/data/snowcast_provided/train_labels.csv\"\nground_measure_metadata_file = f\"{github_dir}/data/snowcast_provided/ground_measures_metadata.csv\"\n\nready_for_training_folder = f\"{github_dir}/data/ready_for_training/\"\n\nresult_mapping_file = f\"{ready_for_training_folder}station_cell_mapping.csv\"\n\n\nif os.path.exists(result_mapping_file):\n    exit()\n\n\ngridcells = geojson.load(open(gridcells_file))\ntraining_df = pd.read_csv(training_feature_file, header=0)\ntesting_df = pd.read_csv(testing_feature_file, header=0)\nground_measure_metadata_df = pd.read_csv(ground_measure_metadata_file, header=0)\ntrain_labels_df = pd.read_csv(train_labels_file, header=0)\n\nprint(\"training: \", training_df.head())\nprint(\"testing: \", testing_df.head())\nprint(\"ground measure metadata: \", ground_measure_metadata_df.head())\nprint(\"training labels: \", train_labels_df.head())\n\n\ndef calculateDistance(lat1, lon1, lat2, lon2):\n    lat1 = float(lat1)\n    lon1 = float(lon1)\n    lat2 = float(lat2)\n    lon2 = float(lon2)\n    return math.sqrt((lat1-lat2)**2 + (lon1-lon2)**2)\n  \n# prepare the training data\n\nstation_cell_mapper_df = pd.DataFrame(columns = [\"station_id\", \"cell_id\", \"lat\", \"lon\"])\n\nground_measure_metadata_df = ground_measure_metadata_df.reset_index()  # make sure indexes pair with number of rows\nfor index, row in ground_measure_metadata_df.iterrows():\n  \t\n    print(row['station_id'], row['name'], row['latitude'], row['longitude'])\n    station_lat = row['latitude']\n    station_lon = row['longitude']\n    \n    shortest_dis = 999\n    associated_cell_id = None\n    associated_lat = None\n    associated_lon = None\n    \n    for idx,cell in enumerate(gridcells['features']):\n    \n      current_cell_id = cell['properties']['cell_id']\n\n      #print(\"collecting \", current_cell_id)\n      cell_lon = np.unique(np.ravel(cell['geometry']['coordinates'])[0::2]).mean()\n      cell_lat = np.unique(np.ravel(cell['geometry']['coordinates'])[1::2]).mean()\n\n      dist = calculateDistance(station_lat, station_lon, cell_lat, cell_lon)\n\n      if dist < shortest_dis:\n        associated_cell_id = current_cell_id\n        shortest_dis = dist\n        associated_lat = cell_lat\n        associated_lon = cell_lon\n    \n    station_cell_mapper_df.loc[len(station_cell_mapper_df.index)] = [row['station_id'], associated_cell_id, associated_lat, associated_lon]\n    \nprint(station_cell_mapper_df.head())\nstation_cell_mapper_df.to_csv(f\"{ready_for_training_folder}station_cell_mapping.csv\")\n    \n\n\n      \n",
  "history_output" : "/home/chetana\n",
  "history_begin_time" : 1677792181323,
  "history_end_time" : 1677792187267,
  "history_notes" : null,
  "history_process" : "rmxece",
  "host_id" : "45wlwr",
  "indicator" : "Done"
}]
